!function(){var e=angular.module("league",["ngMaterial","ngRoute","ngResource","ngAnimate"])
e.config(["$routeProvider","$httpProvider","$mdThemingProvider",function(e,t,n){e.when("/",{controller:"SummonerController",templateUrl:"/static/main.html"}).when("/summoner/:summonerName",{controller:"ChampionsController",templateUrl:"/static/champions.html"}).otherwise({redirectTo:"/"}),n.theme("default").primaryPalette("cyan").accentPalette("amber")}]),e.controller("SummonerController",["$http","$location",function(e,t){this.playerName="",this.getSummoner=function(){console.log("Getting summoner "+this.playerName),t.path("/summoner/"+this.playerName)}}]),e.controller("ChampionsController",["$http","$location","$routeParams","SessionService","Champion","$scope",function(e,t,n,r,o,a){a.playerName="",a.playerName=n.summonerName,a.playerId=0,a.champions={},a.data={selectedIndex:0},a.TOP="TOP",a.MIDDLE="MIDDLE",a.BOTTOM="BOTTOM",a.JUNGLE="JUNGLE",a.gettingData=!0,a.gotError=!1,a.next=function(){a.data.selectedIndex=Math.min(a.data.selectedIndex+1,3)},a.previous=function(){a.data.selectedIndex=Math.max(a.data.selectedIndex-1,0)},a.backToFront=function(){t.path("/")},r.StartSession(a.playerName).then(function(e){console.log("Yay! Found player "+e.data.user_id+" from "+a.summonerName+"."),a.playerId=encodeURI(e.data.user_id),console.log("Now requesting full information..."),a.champions=o.query({username:a.playerName,userId:a.playerId},function(){console.log("Finished the query..."),a.gettingData=!1},function(){a.gotError=!0})})["catch"](function(){console.log("Oh no!"),a.gotError=!0})}]),e.service("SessionService",["$http","$q","$timeout",function(e,t,n){var r=this,o=5
this.StartSession=function(a,i){return i=angular.isUndefined(i)?o:i,e.get("/api/"+a).then(function(e){return e},function(){if(i>0){console.log("Trying again with "+i+".")
var e=t.defer()
return n(function(){e.resolve(r.StartSession(a,--i))},2500),e.promise}return t.reject("oops!")})}}]),e.factory("Champion",["$resource",function(e){return e("/api/stats/:username/:userId",{username:"@username",userId:"@userId"},{query:{method:"GET",params:{username:"@username",userId:"@userId"}}})}]),e.directive("summonerLogin",function(){return{restrict:"E",templateUrl:"main.html"}}),e.directive("filteredChamps",function(){return{restrict:"E",templateUrl:"/static/championList.html",scope:{certainFilter:"="}}}),e.filter("encodeURIComponent",function(){return window.encodeURIComponent})}()
