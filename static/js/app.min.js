!function(){var e=angular.module("league",["ngMaterial","ngRoute","ngResource","ngAnimate"])
e.config(["$routeProvider","$httpProvider","$mdThemingProvider",function(e,t,n){e.when("/",{controller:"SummonerController",templateUrl:"/static/main.html"}).when("/summoner/:summonerName",{controller:"ChampionsController",templateUrl:"/static/champions.html"}).otherwise({redirectTo:"/"}),n.theme("default").primaryPalette("cyan").accentPalette("amber")}]),e.controller("SummonerController",["$http","$location","$scope","Stats",function(e,t,n,r){this.playerName="",n.stats=r.get(),this.getSummoner=function(){console.log("Getting summoner "+this.playerName),t.path("/summoner/"+this.playerName)}}]),e.controller("RandomController",["$http","$scope","RandomStats",function(e,t,n){t.stats=n.get()}]),e.controller("ChampionsController",["$http","$location","$routeParams","SessionService","Champion","$scope","ChampionReset",function(e,t,n,r,o,a,s){a.playerName="",a.playerName=n.summonerName,a.playerId=0,a.champions={},a.data={selectedIndex:0},a.TOP="TOP",a.MIDDLE="MIDDLE",a.BOTTOM="BOTTOM",a.JUNGLE="JUNGLE",a.gettingData=!0,a.gotError=!1,a.next=function(){a.data.selectedIndex=Math.min(a.data.selectedIndex+1,3)},a.previous=function(){a.data.selectedIndex=Math.max(a.data.selectedIndex-1,0)},a.backToFront=function(){t.path("/")},a.resetStats=function(){console.log("Attempting to reset user..."),a.champions=s.query({username:a.playerName,userId:a.playerId},function(){console.log("Got player...")})},r.StartSession(a.playerName).then(function(e){console.log("Yay! Found player "+e.data.user_id+" from "+a.summonerName+"."),a.playerId=encodeURI(e.data.user_id),console.log("Now requesting full information..."),a.champions=o.query({username:a.playerName,userId:a.playerId},function(){console.log("Finished the query..."),a.gettingData=!1},function(){a.gotError=!0})})["catch"](function(){console.log("Oh no!"),a.gotError=!0})}]),e.service("SessionService",["$http","$q","$timeout",function(e,t,n){var r=this,o=5
this.StartSession=function(a,s){return s=angular.isUndefined(s)?o:s,e.get("/api/"+a).then(function(e){return e},function(){if(s>0){console.log("Trying again with "+s+".")
var e=t.defer()
return n(function(){e.resolve(r.StartSession(a,--s))},2500),e.promise}return t.reject("oops!")})}}]),e.factory("Champion",["$resource",function(e){return e("/api/stats/:username/:userId",{username:"@username",userId:"@userId"},{query:{method:"GET",params:{username:"@username",userId:"@userId"}}})}]),e.factory("ChampionReset",["$resource",function(e){return e("/api/stats/:username/:userId/reset",{username:"@username",userId:"@userId"},{query:{method:"GET",params:{username:"@username",userId:"@userId"}}})}]),e.factory("Stats",["$resource",function(e){return e("/api/internal/stats")}]),e.factory("RandomStats",["$resource",function(e){return e("/api/internal/stats/random")}]),e.directive("summonerLogin",function(){return{restrict:"E",templateUrl:"main.html"}}),e.directive("filteredChamps",function(){return{restrict:"E",templateUrl:"/static/championList.html",scope:{certainFilter:"="}}}),e.filter("encodeURIComponent",function(){return window.encodeURIComponent}),e.filter("capitalize",function(){return function(e){return e=e.toLowerCase(),e.substring(0,1).toUpperCase()+e.substring(1)}})}()
